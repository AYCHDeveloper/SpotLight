/**
 * Spotlight.js v0.5.1
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';var aa={};function ba(a){for(var b=a.classList,c={},d=0;d<b.length;d++)c[b[d]]=1;a.a=c}function f(a,b){a=ca(a);"string"===typeof b&&(b=[b]);for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var g=b[e];d.a||ba(d);d.a[g]||(d.a[g]=1,d.classList.add(g))}}function h(a,b){a=ca(a);"string"===typeof b&&(b=[b]);for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var g=b[e];d.a||ba(d);d.a[g]&&(d.a[g]=0,d.classList.remove(g))}}
function k(a,b,c,d){a=ca(a);if("string"===typeof b)for(var e=0;e<a.length;e++){var g=a[e],p=g.b;p||(g.b=p={});p[b]!==c&&(p[b]=c,g.style.setProperty(aa[b]||(aa[b]=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),c,d||null))}else for(c=Object.keys(b),e=0;e<c.length;e++)g=c[e],k(a,g,b[g],d)}var da=0;function ea(a,b,c){k(a,"transition","none");k(a,b,c);da||(da=a.clientTop&&0);k(a,"transition","")}
function ca(a){if(a.constructor===Array){for(var b=0;b<a.length;b++){var c=a[b];a[b]="string"===typeof c?document.querySelector(c):c}return a}return"string"===typeof a?document.querySelectorAll(a):[a]}function l(a,b){return(b||document).getElementsByClassName(a)};function fa(a,b,c,d){ha("add",a,b,c,d)}function ia(a,b,c,d){ha("remove",a,b,c,d)}function ha(a,b,c,d,e){b[a+"EventListener"](c||"click",d,"undefined"===typeof e?!0:e)}function m(a,b){a||(a=window.event);a&&(b||a.preventDefault(),a.stopImmediatePropagation(),a.returnValue=!1);return!1};var n="theme fullscreen autofit zoom-in zoom-out page title description player".split(" "),q,r,ja,ka,t,u,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,la,ma,na,oa,R,pa,S,T,U,V,W,X,ra;function sa(a,b,c){this.src=a;this.title=b;this.description=c}
function ta(a,b){if(I=a.length){N||(N=l("pane",P));var c=N.length,d=J.title,e=J.description;X=Array(I);for(var g=0;g<I;g++){var p=a[g],v=p.dataset;if(g>=c){var w=N[0].cloneNode(!1);k(w,"left",100*g+"%");N[0].parentNode.appendChild(w)}w=void 0;var Ra=X,Sa=g,Ta=v&&(v.href||v.src)||p.src||p.href,qa;(qa=v&&v.title||p.title)||(qa=(w=(p||document).getElementsByTagName("img")).length&&w[0].alt);Ra[Sa]=new sa(Ta,qa||d||"",v&&v.description||p.description||e||"")}H=b||1;ea(L,"transform","translateX(-"+100*
(H-1)+"%)");ua()}}function va(a,b,c,d){if(d||a[c])J[c]=b&&b[c]||d}
function wa(a,b){J={};b&&xa(b);xa(a);va(a,b,"description");va(a,b,"title");va(a,b,"prefetch",!0);va(a,b,"preloader",!0);K=J.infinite;if((a=J.zoom)||""===a)J["zoom-in"]=J["zoom-out"]=a,delete J.zoom;if((a=J.control)||""===a){a="string"===typeof a?a.split(","):a;for(b=0;b<n.length;b++)J[n[b]]="false";for(b=0;b<a.length;b++){var c=a[b].trim();"zoom"===c?J["zoom-in"]=J["zoom-out"]="true":J[c]="true"}}for(a=0;a<n.length;a++)b=n[a],k(l(b,P)[0],"display","false"===J[b]?"none":"");(G=J.theme)?ya():G="white"}
function xa(a){for(var b=J,c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b[e]=""+a[e]}}function za(){var a=H;M=N[a-1];O=M.firstElementChild;H=a;if(!O){var b="false"!==J.preloader;O=new Image;O.onload=function(){b&&h(P,"loading");k(this,{visibility:"visible",opacity:1,transform:""});"false"!==J.prefetch&&a<I&&((new Image).src=X[a].src)};O.onerror=function(){M.removeChild(this)};M.appendChild(O);O.src=X[a-1].src;b&&f(P,"loading");return!b}return!0}fa(document,"",Aa);
fa(document,"DOMContentLoaded",function(){P=document.createElement("div");P.id="spotlight";P.innerHTML='<div class=preloader></div><div class=scene><div class=pane></div></div><div class=header><div class=page></div><div class="icon fullscreen"></div><div class="icon autofit"></div><div class="icon zoom-out"></div><div class="icon zoom-in"></div><div class="icon theme"></div><div class="icon player"></div><div class="icon close"></div></div><div class="arrow arrow-left"></div><div class="arrow arrow-right"></div><div class=footer><div class=title></div><div class=description></div></div>';
k(P,"transition","none");document.body.appendChild(P);L=l("scene",P)[0];Q=l("footer",P)[0];la=l("title",Q)[0];ma=l("description",Q)[0];na=l("arrow-left",P)[0];oa=l("arrow-right",P)[0];R=l("fullscreen",P)[0];pa=l("page",P)[0];S=l("player",P)[0];W=document.documentElement||document.body;document.cancelFullScreen||(document.cancelFullScreen=document.exitFullscreen||document.webkitCancelFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||function(){});W.requestFullScreen||(W.requestFullScreen=
W.webkitRequestFullScreen||W.msRequestFullScreen||W.mozRequestFullScreen||k(R,"display","none")||function(){});ra=[[window,"keydown",Ba],[window,"wheel",Ca],[window,"hashchange",Da],[L,"mousedown",Ea],[L,"mouseleave",Fa],[L,"mouseup",Fa],[L,"mousemove",Ga],[L,"touchstart",Ea,{passive:!1}],[L,"touchcancel",Fa],[L,"touchend",Fa],[L,"touchmove",Ga,{passive:!0}],[R,"",Ha],[na,"",Ia],[oa,"",Y],[S,"",Ja],[l("autofit",P)[0],"",Ka],[l("zoom-in",P)[0],"",La],[l("zoom-out",P)[0],"",Ma],[l("close",P)[0],"",
Na],[l("theme",P)[0],"",ya]]},{once:!0});function Oa(a){for(var b=0;b<ra.length;b++){var c=ra[b];(a?fa:ia)(c[0],c[1],c[2],c[3])}}function Aa(a){var b=Pa.call(a.target,".spotlight");if(b){var c=Pa.call(b,".spotlight-group"),d=l("spotlight",c);wa(b.dataset,c&&c.dataset);for(c=0;c<d.length;c++)if(d[c]===b){ta(d,c+1);break}Qa();return m(a)}}
function Ba(a){if(M)switch(a.keyCode){case 8:Ka();break;case 27:Na();break;case 32:"false"!==J.player&&Ja();break;case 37:Ia();break;case 39:Y();break;case 38:case 107:case 187:La();break;case 40:case 109:case 189:Ma()}}function Ca(a){M&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Ma():La())}function Da(){M&&"#spotlight"===location.hash&&Na(!0)}function Ja(a){("boolean"===typeof a?a:!T)?T||(T=setInterval(Y,1*J.player||5E3),f(S,"on")):T&&(T=clearInterval(T),h(S,"on"));return T}
function Z(){V?clearTimeout(V):f(P,"menu");var a=J.autohide;V="false"!==a?setTimeout(function(){h(P,"menu");V=null},1*a||2E3):1}function Ua(a){"boolean"===typeof a&&(V=a?V:0);V?(V=clearTimeout(V),h(P,"menu")):Z();return m(a)}function Ea(a){A=!0;B=!1;var b=Va(a);t=document.body.clientWidth;u=document.body.clientHeight;x=O.width*z;y=O.height*z;C=x<=t;ja=b.x;ka=b.y;return m(a,!0)}
function Fa(a){if(A&&!B)return A=!1,Ua(a);C&&B&&(ea(L,"transform","translateX("+-(100*(H-1)-q/t*100)+"%)"),q<-(u/10)&&Y()||q>u/10&&Ia()||k(L,"transform","translateX(-"+100*(H-1)+"%)"),q=0,C=!1,k(M,"transform",""));A=!1;return m(a)}function Ga(a){if(A){U||(U=requestAnimationFrame(Wa));var b=Va(a),c=(x-t)/2;B=!0;C=x<=t;q-=ja-(ja=b.x);C?D=!0:q>c?q=c:0<t-q-x+c?q=t-x+c:D=!0;y>u&&(c=(y-u)/2,r-=ka-(ka=b.y),r>c?r=c:0<u-r-y+c?r=u-y+c:D=!0)}else Z();return m(a,!0)}
function Va(a){var b=a.touches;b&&(b=b[0]);return{x:b?b.clientX:a.pageX,y:b?b.clientY:a.pageY}}function Wa(a){D?(a&&(U=requestAnimationFrame(Wa)),k(M,"transform","translate("+q+"px, "+r+"px)")):U=null;D=!1}function Ha(a){("boolean"===typeof a?a:document.isFullScreen||document.webkitIsFullScreen||document.mozFullScreen)?(document.cancelFullScreen(),h(R,"on")):(W.requestFullScreen(),f(R,"on"))}
function Ka(a){"boolean"===typeof a&&(E=!a);E=1===z&&!E;k(O,{maxHeight:E?"none":"",maxWidth:E?"none":"",transform:""});z=1;r=q=0;D=!0;Wa();Z()}function La(a){var b=z/.65;5>=b&&Xa(z=b);a||Z()}function Xa(a){k(O,"transform","translate(-50%, -50%) scale("+(a||1)+")")}function Ma(a){var b=.65*z;1<=b&&(Xa(z=b),r=q=0,D=!0,Wa());a||Z()}function Qa(){location.hash="spotlight";location.hash="show";Oa(!0);k(P,"transition","");f(W,"hide-scrollbars");f(P,"show");Z()}
function Na(a){Oa(!1);history.go(!0===a?-1:-2);h(W,"hide-scrollbars");h(P,"show");T&&Ja(!1);O.parentNode.removeChild(O);M=O=X=null}function Ia(){T||Z();if(1<H)return H--,ua(!1),!0;if(T||K)return Ya(I)}function Y(){T||Z();if(!T||!A){if(H<I)return H++,ua(!0),!0;if(T||K)return Ya(1)}}function Ya(a){if(a!==H){T||Z();var b=a>H;H=a;ua(b);return!0}}function ya(a){"boolean"===typeof a?F=a:(F=!F,Z());F?f(P,G):h(P,G)}
function ua(a){r=q=0;z=1;var b=J.animation,c=!0,d=!0,e=!0,g=!1;if(b||""===b){g=e=d=c=!1;b="string"===typeof b?b.split(","):b;for(var p=0;p<b.length;p++){var v=b[p].trim();"scale"===v?c=!0:"fade"===v?d=!0:"slide"===v?e=!0:"flip"===v&&(g=!0)}}k(L,"transition",e?"":"none");k(L,"transform","translateX(-"+100*(H-1)+"%)");M&&k(M,"transform","");if(O){k(O,{opacity:d?0:1,transform:""});var w=O;setTimeout(function(){w&&O!==w&&w.parentNode&&w.parentNode.removeChild(w)},800)}e=za();ea(O,{opacity:d?0:1,transform:"translate(-50%, -50%)"+
(c?" scale(0.8)":"")+(g&&"undefined"!==typeof a?" rotateY("+(a?"":"-")+"90deg)":""),maxHeight:"",maxWidth:""});e&&k(O,{visibility:"visible",opacity:1,transform:""});k(M,"transform","");k(na,"visibility",K||1!==H?"":"hidden");k(oa,"visibility",K||H!==I?"":"hidden");a=X[H-1];if(c=a.title||a.description)la.textContent=a.title||"",ma.textContent=a.description||"";k(Q,"visibility",c?"visible":"hidden");pa.textContent=H+" / "+I}
var Pa=Element.prototype.closest||function(a){var b=this;for(a=a.substring(1);b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement||b.parentNode}};window.Spotlight={theme:ya,fullscreen:Ha,autofit:Ka,next:Y,prev:Ia,"goto":Ya,close:Na,zoom:Xa,menu:Ua,show:function(a,b){setTimeout(function(){a?(b?wa(b):b={},ta(a,b.index)):J={};Qa()})},play:Ja};}).call(this);
