/**
 * Spotlight.js v0.5.4 (CDN)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';var aa={};function ba(a){for(var b=a.classList,c={},d=0;d<b.length;d++)c[b[d]]=1;a.a=c}function f(a,b){a=ca(a);"string"===typeof b&&(b=[b]);for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var h=b[e];d.a||ba(d);d.a[h]||(d.a[h]=1,d.classList.add(h))}}function g(a,b){a=ca(a);"string"===typeof b&&(b=[b]);for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var h=b[e];d.a||ba(d);d.a[h]&&(d.a[h]=0,d.classList.remove(h))}}
function k(a,b,c,d){a=ca(a);if("string"===typeof b)for(var e=0;e<a.length;e++){var h=a[e],m=h.b;m||(h.b=m={});m[b]!==c&&(m[b]=c,h.style.setProperty(aa[b]||(aa[b]=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),c,d||null))}else for(c=Object.keys(b),e=0;e<c.length;e++)h=c[e],k(a,h,b[h],d)}var da=0;function l(a,b,c){k(a,"transition","none");k(a,b,c);da||(da=a.clientTop&&0);k(a,"transition","")}
function ca(a){if(a.constructor===Array){for(var b=0;b<a.length;b++){var c=a[b];a[b]="string"===typeof c?document.querySelector(c):c}return a}return"string"===typeof a?document.querySelectorAll(a):[a]}function n(a,b){return(b||document).getElementsByClassName(a)};function ea(a,b,c,d){fa("add",a,b,c,d)}function ha(a,b,c,d){fa("remove",a,b,c,d)}function fa(a,b,c,d,e){b[a+"EventListener"](c||"click",d,"undefined"===typeof e?!0:e)}function p(a,b){a||(a=window.event);a&&(b||a.preventDefault(),a.stopImmediatePropagation(),a.returnValue=!1);return!1};var ia=document.createElement("link");ia.rel="stylesheet";ia.href="https://rawcdn.githack.com/nextapps-de/spotlight/master/dist/css/spotlight.css";document.getElementsByTagName("head")[0].appendChild(ia);var q="theme fullscreen autofit zoom-in zoom-out page title description player progress".split(" "),r,t,ja,ka,u,x,y,z,A,B,C,D,E,F,G,la,H,I,J,K,ma,L,M,N,O,P,na,oa,pa,qa,ra,Q,sa,ta,R,S,ua,T,U,V,va;function wa(a,b,c){this.src=a;this.title=b;this.description=c}
function xa(a,b){if(I=a.length){N||(N=n("pane",P));var c=N.length,d=J.title,e=J.description;V=Array(I);for(var h=0;h<I;h++){var m=a[h],v=m.dataset;if(h>=c){var w=N[0].cloneNode(!1);k(w,"left",100*h+"%");N[0].parentNode.appendChild(w)}w=void 0;V[h]=new wa(v&&(v.href||v.src)||m.src||m.href,v&&v.title||m.title||(w=(m||document).getElementsByTagName("img")).length&&w[0].alt||d||"",v&&v.description||m.description||e||"")}H=b||1;l(L,"transform","translateX(-"+100*(H-1)+"%)");ya()}}
function za(a,b,c,d){if(d||a[c])J[c]=b&&b[c]||d}
function Aa(a,b){J={};b&&Ba(b);Ba(a);za(a,b,"description");za(a,b,"title");za(a,b,"prefetch",!0);za(a,b,"preloader",!0);K=J.infinite;K="undefined"!==typeof K&&"false"!==K;ma="false"!==J.progress;if((a=J.zoom)||""===a)J["zoom-in"]=J["zoom-out"]=a,delete J.zoom;if((a=J.control)||""===a){a="string"===typeof a?a.split(","):a;for(b=0;b<q.length;b++)J[q[b]]="false";for(b=0;b<a.length;b++){var c=a[b].trim();"zoom"===c?J["zoom-in"]=J["zoom-out"]="true":J[c]="true"}}for(a=0;a<q.length;a++)b=q[a],k(n(b,P)[0],
"display","false"===J[b]?"none":"");(la=J.theme)?Ca():la="white"}function Ba(a){for(var b=J,c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b[e]=""+a[e]}}
function Da(){var a=H;M=N[a-1];O=M.firstElementChild;H=a;if(!O){var b="false"!==J.preloader;O=new Image;O.onload=function(){b&&g(P,"loading");k(this,{visibility:"visible",opacity:1,transform:""});"false"!==J.prefetch&&a<I&&((new Image).src=V[a].src)};O.onerror=function(){M.removeChild(this)};M.appendChild(O);O.src=V[a-1].src;b&&f(P,"loading");return!b}return!0}ea(document,"",Ea);
ea(document,"DOMContentLoaded",function(){P=document.createElement("div");P.id="spotlight";P.innerHTML='<div class=preloader></div><div class=scene><div class=pane></div></div><div class=header><div class=page></div><div class="icon fullscreen"></div><div class="icon autofit"></div><div class="icon zoom-out"></div><div class="icon zoom-in"></div><div class="icon theme"></div><div class="icon player"></div><div class="icon close"></div></div><div class=progress></div><div class="arrow arrow-left"></div><div class="arrow arrow-right"></div><div class=footer><div class=title></div><div class=description></div></div>';k(P,
"transition","none");document.body.appendChild(P);L=n("scene",P)[0];na=n("footer",P)[0];oa=n("title",na)[0];pa=n("description",na)[0];qa=n("arrow-left",P)[0];ra=n("arrow-right",P)[0];Q=n("fullscreen",P)[0];sa=n("page",P)[0];ta=n("player",P)[0];R=n("progress",P)[0];U=document.documentElement||document.body;document.cancelFullScreen||(document.cancelFullScreen=document.exitFullscreen||document.webkitCancelFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||function(){});U.requestFullScreen||
(U.requestFullScreen=U.webkitRequestFullScreen||U.msRequestFullScreen||U.mozRequestFullScreen||k(Q,"display","none")||function(){});va=[[window,"keydown",Fa],[window,"wheel",Ga],[window,"hashchange",Ha],[L,"mousedown",Ia],[L,"mouseleave",Ja],[L,"mouseup",Ja],[L,"mousemove",Ka],[L,"touchstart",Ia,{passive:!1}],[L,"touchcancel",Ja],[L,"touchend",Ja],[L,"touchmove",Ka,{passive:!0}],[Q,"",La],[qa,"",Ma],[ra,"",X],[ta,"",Na],[n("autofit",P)[0],"",Oa],[n("zoom-in",P)[0],"",Pa],[n("zoom-out",P)[0],"",Qa],
[n("close",P)[0],"",Ra],[n("theme",P)[0],"",Ca]]},{once:!0});function Sa(a){for(var b=0;b<va.length;b++){var c=va[b];(a?ea:ha)(c[0],c[1],c[2],c[3])}}function Ea(a){var b=Ta.call(a.target,".spotlight");if(b){var c=Ta.call(b,".spotlight-group"),d=n("spotlight",c);Aa(b.dataset,c&&c.dataset);for(c=0;c<d.length;c++)if(d[c]===b){xa(d,c+1);break}Ua();return p(a)}}
function Fa(a){if(M)switch(a.keyCode){case 8:Oa();break;case 27:Ra();break;case 32:"false"!==J.player&&Na();break;case 37:Ma();break;case 39:X();break;case 38:case 107:case 187:Pa();break;case 40:case 109:case 189:Qa()}}function Ga(a){M&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Qa():Pa())}function Ha(){M&&"#spotlight"===location.hash&&Ra(!0)}
function Na(a){("boolean"===typeof a?a:!S)?S||(a=1*J.player||7E3,S=setInterval(X,a),f(ta,"on"),ma&&k(R,{transitionDuration:a+"ms",transform:"translateX(0)"})):S&&(S=clearInterval(S),g(ta,"on"),ma&&l(R,"transform",""));return S}function Y(){T?clearTimeout(T):f(P,"menu");var a=J.autohide;T="false"!==a?setTimeout(function(){g(P,"menu");T=null},1*a||3E3):1}function Va(a){"boolean"===typeof a&&(T=a?T:0);T?(T=clearTimeout(T),g(P,"menu")):Y();return p(a)}
function Ia(a){B=!0;C=!1;var b=Wa(a);u=document.body.clientWidth;x=document.body.clientHeight;y=O.width*A;z=O.height*A;D=y<=u;ja=b.x;ka=b.y;return p(a,!0)}function Ja(a){if(B&&!C)return B=!1,Va(a);D&&C&&(l(L,"transform","translateX("+-(100*(H-1)-r/u*100)+"%)"),r<-(x/10)&&X()||r>x/10&&Ma()||k(L,"transform","translateX(-"+100*(H-1)+"%)"),r=0,D=!1,k(M,"transform",""));B=!1;return p(a)}
function Ka(a){if(B){ua||(ua=requestAnimationFrame(Xa));var b=Wa(a),c=(y-u)/2;C=!0;D=y<=u;r-=ja-(ja=b.x);D?E=!0:r>c?r=c:0<u-r-y+c?r=u-y+c:E=!0;z>x&&(c=(z-x)/2,t-=ka-(ka=b.y),t>c?t=c:0<x-t-z+c?t=x-z+c:E=!0)}else Y();return p(a,!0)}function Wa(a){var b=a.touches;b&&(b=b[0]);return{x:b?b.clientX:a.pageX,y:b?b.clientY:a.pageY}}function Xa(a){E?(a&&(ua=requestAnimationFrame(Xa)),k(M,"transform","translate("+r+"px, "+t+"px)")):ua=null;E=!1}
function La(a){("boolean"===typeof a?a:document.isFullScreen||document.webkitIsFullScreen||document.mozFullScreen)?(document.cancelFullScreen(),g(Q,"on")):(U.requestFullScreen(),f(Q,"on"))}function Oa(a){"boolean"===typeof a&&(F=!a);F=1===A&&!F;k(O,{maxHeight:F?"none":"",maxWidth:F?"none":"",transform:""});A=1;t=r=0;E=!0;Xa();Y()}function Pa(a){var b=A/.65;5>=b&&Ya(A=b);a||Y()}function Ya(a){k(O,"transform","translate(-50%, -50%) scale("+(a||1)+")")}
function Qa(a){var b=.65*A;1<=b&&(Ya(A=b),t=r=0,E=!0,Xa());a||Y()}function Ua(){location.hash="spotlight";location.hash="show";Sa(!0);k(P,"transition","");f(U,"hide-scrollbars");f(P,"show");Y()}function Ra(a){Sa(!1);history.go(!0===a?-1:-2);g(U,"hide-scrollbars");g(P,"show");S&&Na(!1);O.parentNode.removeChild(O);M=O=V=null}function Ma(){if(1<H)return Z(H-1);if(S||K)return Z(I)}function X(){if(H<I)return Z(H+1);if(S||K)return Z(1)}
function Z(a){if(!(S&&B||a===H)){S||Y();S&&ma&&(l(R,"transform",""),k(R,"transform","translateX(0)"));var b=a>H;H=a;ya(b);return!0}}function Ca(a){"boolean"===typeof a?G=a:(G=!G,Y());G?f(P,la):g(P,la)}
function ya(a){t=r=0;A=1;var b=J.animation,c=!0,d=!0,e=!0;if(b||""===b){c=d=e=!1;b="string"===typeof b?b.split(","):b;for(var h=0;h<b.length;h++){var m=b[h].trim();if("scale"===m)c=!0;else if("fade"===m)d=!0;else if("slide"===m)e=!0;else if("flip"===m)var v=!0;else if("false"!==m){c=d=e=v=!1;var w=m;break}}}k(L,"transition",e?"":"none");k(L,"transform","translateX(-"+100*(H-1)+"%)");M&&k(M,"transform","");if(O){k(O,{opacity:d?0:1,transform:""});var W=O;setTimeout(function(){W&&O!==W&&W.parentNode&&
W.parentNode.removeChild(W)},800)}e=Da();w&&f(O,w);l(O,{opacity:d?0:1,transform:"translate(-50%, -50%)"+(c?" scale(0.8)":"")+(v&&"undefined"!==typeof a?" rotateY("+(a?"":"-")+"90deg)":""),maxHeight:"",maxWidth:""});e&&k(O,{visibility:"visible",opacity:1,transform:""});w&&g(O,w);k(M,"transform","");k(qa,"visibility",K||1!==H?"":"hidden");k(ra,"visibility",K||H!==I?"":"hidden");a=V[H-1];if(c=a.title||a.description)oa.textContent=a.title||"",pa.textContent=a.description||"";k(na,"visibility",c?"visible":
"hidden");sa.textContent=H+" / "+I}var Ta=Element.prototype.closest||function(a){var b=this;for(a=a.substring(1);b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement||b.parentNode}};window.Spotlight={theme:Ca,fullscreen:La,autofit:Oa,next:X,prev:Ma,"goto":Z,close:Ra,zoom:Ya,menu:Va,show:function(a,b){setTimeout(function(){a?(b?Aa(b):b={},xa(a,b.index)):J={};Ua()})},play:Na};}).call(this);
